model Appointment {
  id            Int                @id @default(autoincrement())
  customerName  String
  whatsapp      String

  /// ğŸ‘‡ NUEVO: solo dÃ­gitos para comparaciones
  whatsappNormalized String        @default("")

  barber        Barber             @relation(fields: [barberId], references: [id])
  barberId      Int
  service       Service            @relation(fields: [serviceId], references: [id])
  serviceId     Int

  start         DateTime
  end           DateTime

  /// ğŸ‘‡ NUEVO: fecha de la cita (sin hora) para validar â€œuna por dÃ­aâ€
  appointmentDate DateTime         @db.Date

  status        AppointmentStatus  @default(SCHEDULED)
  notes         String?
  createdAt     DateTime           @default(now())

  @@index([barberId, start, end])
  @@index([serviceId])

  /// ğŸ‘‡ NUEVO: Ã­ndice compuesto que acelera la validaciÃ³n por dÃ­a
  @@index([whatsappNormalized, appointmentDate])
}